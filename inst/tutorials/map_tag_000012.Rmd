---
title: "Map Tag 000012"
author: "maurolepore@gmail.com"
date: "2017-11-29"
output:
  rmarkdown::html_notebook:
    toc: true
    toc_depth: 6
    theme: united
---

```{r setup, include=FALSE}
set.seed(1014)
options(digits = 3)

knitr::opts_chunk$set(
  echo = TRUE,
  comment = "#>",
  collapse = TRUE,
  cache = TRUE,
  out.width = "70%",
  fig.align = "center",
  fig.width = 6,
  fig.asp = 0.618,  # 1 / phi
  fig.show = "hold"
)

options(dplyr.print_min = 6, dplyr.print_max = 6)
```

Setup

```{r}
library(map)
library(dplyr)
library(ggplot2)
```

Filter tag 000012.

```{r}
# Fix wrong names
vft <- rename(sinharaja::sinh_vft , x = QX, y = QY)

tag_000012 <- filter(vft, grepl("000012", Tag))
select(tag_000012, QuadratName, Tag, CensusID, Status, DBH)
```

In the table above, notice that the Status of last census is dead. `map_tag()` currently plots the status of the last census:

```{r, fig.width=6, fig.asp=1.1, out.width="100%"}
map_tag(tag_000012)
```

Now, `map_tag()` shows a snapshot of the latest status of the plot. I believe this is more useful than showing the entire history of each stem -- which not only may confuse the field workers but also will consume much more time to plot.

If `map_tag()` plotted the status history ofeach stem, each stem will show multiple tags, and multiple overlapping poins of different shapes -- each shape representing one historical status. This is what it would look like:

```{r}
tag_000012 %>% 
  ggplot(aes(x, y)) + 
    geom_point(aes(shape = Status), size = 5) +
    scale_shape_manual(values = c(1, 6)) +
    ggrepel::geom_text_repel(aes(label = paste(Tag, Status, sep = "_"))) +
    theme_minimal()
```

If this is messy with just one tag, imagine what it'll look like with all tags! What do you think?
